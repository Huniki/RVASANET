# AutoDL_tutorial
本来是准备空闲的时候写的，但是我发现模型训练还要很久，而且我得等它结束了，然后把租的服务器关机啦，才能回去，不然就是纯烧钱！
首先附上租服务器的网站：https://www.autodl.com/home
其次我们正式开始教程。
## 一、注册账号
这个没有什么难度，然后记得申请学生认证！会有那么一丢丢的优惠！
## 二、官方教程
![image](/autodl/4.png)
进入官网之后，有一个新手入门！点进去，是官方给的教程。其实官方给的教程是十分的详细的！还是很建议读一下的。当然之所以要了解这个服务器，是因为在工作实习中，基本上都是通过远程连接的方法去做的，很少会有一台服务器在你面前的情况。其次呢，服务器的配置主要就是两方面，一方面是环境配置，一方面是数据配置。其他的就相对简单些。当然这里还是推荐去阅读官方的教程，里面提到的一些应用工具，也是之前实习一直用到的，比如filezilla、scp、ssh等等很多。
## 三、选择服务器并租赁
在官网中，我们登录之后，右上角会有一个控制台，点击控制台，你会看到如下界面
![image](/autodl/5.png)
左上方蓝色底色的租用新的实例！点击即可进入选择服务器啦。
![image](/autodl/1.png)
![image](/autodl/2.png)
如上两张图，首先要选择地区，也就是官方把服务器按地区分开啦，这里推荐选择服务器多的地区。因为服务器中的环境和数据仅能在相同地区的服务器之间进行拷贝！服务器的选型就不用多说啦。注意下后面的数据扩容，也比较好理解，免费50G，多出来的就要付费啦。
最重要的就是镜像，你可以将这个理解为环境配置，因为大家都是做深度学习的，所以你可以通过基础镜像选择pytorch版本，cuda版本，ubuntu版本等。当然也可以选择社区镜像，比如一些模型框架OpenPCDet，mmDet3D，这些可能都有镜像，这样就省去了配置环境的麻烦。
这里如果你不清楚什么是镜像，简单理解，就是将配置好的环境，打包，上传到了网上，人们可以拉下来，将镜像变成容器，自己使用，这块是docker的一些东西啦。但是租服务器这块，很简单，你只要选好镜像，环境就 直接给你配好啦。
当然也可能你的环境比较特殊，找不到社区镜像，那么就只能选择跟你环境匹配的基础镜像来做。这样你拿到服务器之后，就需要配环境。
## 四、服务器的基本使用
这里简单叙述下服务器最基础的使用。在有服务器实例的安装图中，可以看到一个服务器所包含的东西，最主要的就是SSH登录的指令和快捷工具中的东西。
简单介绍下，SSH就是一个远程链接的东西，看到上面有一个登录指令和密码，你可以理解这个是一个账号和密码，后面我们详细说这个的使用。
然后就是快捷工具中的一些东西，这里最有用的就是JupyterLab，点击即可进入电脑。
![image](/autodl/6.png)
在这里你可以看到，我们可以打开jupyter notebook和终端之类的东西，也就是说，我们的终端操作均在这里进行即可。当然在左侧，你也可以看到文件的目录。上面的箭头可以用来上传文件，也就是本地文件上传到服务器中，传点小文件还可以，大文件不建议使用这个。其他的一些可以自行探索下。
快捷工具中还有一个AutoPanel，你可以理解这个是对服务器进行实时监控的东西。当然它最主要的功能是数据的上传！这个我们待会说。
最后就剩下，操作中的一些选项，关机开机不用说了吧，很简单，开机开始计费，关机停止计费。但是关机之后，你的显卡就是空闲的啦，别人可能就会占用你的显卡。到时候你就需要将整个实例迁移到别的服务器上去，虽然很方便。
在操作选项中的更多中，有很多选项，这里只说几个重要的：
1、无卡模式开机，好处就是一毛钱一个小时，坏处就是卡不再被你占用，可能被别人抢走，这个操作，一般用于数据上传环节。
2、更换镜像、保存镜像：选服务器的时候，我们选择的镜像还记的吧，更换就是你觉着一开始选的不好，重新整一个。保存镜像，我理解就是将现有的环境打包保存，后面方便你在其他服务器上使用。
3、克隆实例：这个真的好用，我一开始租的4090，因为上传数据，我整了好半天，开的无卡模式，等我开机之后，发现卡被别人占用了，然后我就用的这个，将整个实例克隆到别的服务器上，包括环境啦，数据啦。
## 五、数据上传
首先先介绍下服务器的文件配置
![image](/autodl/8.png)
这里说的很清楚，我们主要用到的文件夹就是/的系统盘，这里主要存放一些代码，/root/autodl-tmp/的数据盘，这里存放数据集，如果你有的话。因为服务器提供了很多公开的数据在/root/autodl-pub/中。
![image](/autodl/9.png)
一开始我还满心欢喜，挺好的这里提供了Nuscenes数据集，但是我发现里面存的都是压缩文件，也就是说，如果你真的想用这个数据集的话，你需要把它拷贝到/root/auto-tmp/中，并解压，因为/root/autodl-pub/是仅可读的不可修改的。
ok，我们说下怎么上传本地数据集，这里需要用到阿里云网盘。这里仅推荐这一种方法，其他方法慢的要死！百度网盘因为授权麻烦，所以这里也不推荐。
首先注册阿里云，然后将本地数据集打包上传。然后在服务器的快捷工具栏中的AutoPanel打开，找到公网网盘，然后完成验证，即可下载数据集。这里数据集下载到/root/autodl-tmp/中。大的数据集仅推荐这一个方法。
如果是小的文件，仅仅是代码之类的，可以选择的方法就比较多啦。
![image](/autodl/10.png)
可以选择这里的文件存储。不可传文件夹。这里需要注意一点：你用的哪个区的服务器，就把数据上传到哪个区！别传错了，本来就传的慢，我等了半天，最后发现区传错了，人在绷不住的时候是真的绷不住。
第二种方法，就是刚才我们提到的在点击JupyterLab后，左上角的箭头可以上传文件。之前试过，这里也很慢！
第三种方法，可以通过filezilla或者XShell的工具进行上传，当然这两个工具，也可以将服务器的文件下载下来。我具体配置其实很简单，可以参考官方文档的教程。其中filezilla是在本地电脑安装的。如下图，需要的主机，端口，用户，密码，这些实际上都是服务器的SSH登录指令和密码。
![image](/autodl/11.png)
第四种方法，就是scp命令行的方法，这个不了解，可以去搜一下。官方也给了教程
到这里，数据上传整体就结束啦！
## VScode配置
数据有啦，代码有啦，环境大家自己配置哈，最后就差运行啦，那么选择什么编译器呢，官方教程给了很多，这里推荐的是vscode，因为远程连接很简单。pycharm的远程连接，需要专业版的，社区版不可以。
首先打开一个vscode，然后安装一个用于远程连接的插件Remote-SSH。其他插件你感兴趣也可以安装。在安装了remote-ssh之后，左侧就出现一个显示器的东西。
![image](/autodl/12.png)
你可以点击那个显示器，也可以点击vscode窗口左下角的那个标志，大于号顶着小于号的标志，然后选择connet to Host，然后选择+Add New SSH Host，然后你就需要把SSH登录指令复制进去，然后会让你选择配置文件，这里不用选直接回车就成。最后连接输入密码即可。
然后我们就可以在vscode打开远程的代码文件夹啦。这里注意下哈，我们还需要给远程vscode安装本地插件，也就是左侧插件标志，点一下，会发现有一个远程插件！然后安装和本地一样就成，因为要装python插件，才能选择环境！
到这里，整体就结束啦~
